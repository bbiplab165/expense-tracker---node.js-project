<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Document</title>
</head>
<body>
    <form action="/updatePassword" method="POST" id="passwordForm">
        <label>Password</label>
        <input type="password" id="password">
        <label>Confirm Password</label>
        <input type="password" id="confirmPassword">
        <button type="submit">Submit</button>
    </form>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("passwordForm");

    form.addEventListener("submit", handleSubmit);

    async function handleSubmit(e) {
        e.preventDefault();

        const password = document.getElementById("password").value;
        const confirmPassword = document.getElementById("confirmPassword").value;

        if (password !== confirmPassword) {
            alert("Passwords do not match!");
            return;
        }

        try {
            await axios.post("http://localhost:3001/updatePassword", {
                password: password,
            });

            console.log("Password updated successfully");
        } catch (err) {
            console.log(err);
        }
    }
});

    </script>
</body>
</html> -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Change Password</title>
</head>
<body>
    <form action="/updatePassword" method="POST" id="passwordForm">
        <label>Password</label>
        <input type="password" id="password">
        <label>Confirm Password</label>
        <input type="password" id="confirmPassword">
        <button type="submit">Submit</button>
    </form>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Function to get the 'uuid' from the URL query parameters
            function getUuidFromUrl() {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get('uuid');
            }

            const form = document.getElementById("passwordForm");
            form.addEventListener("submit", handleSubmit);

            async function handleSubmit(e) {
                e.preventDefault();

                const password = document.getElementById("password").value;
                const confirmPassword = document.getElementById("confirmPassword").value;
                const uuid = getUuidFromUrl(); // Get the 'uuid' from the URL

                if (password !== confirmPassword) {
                    alert("Passwords do not match!");
                    return;
                }

                try {
                    const response = await axios.post(`http://localhost:3001/updatePassword/${uuid}`, {
                        password: password,
                    });

                    console.log("Response:", response.data.message);
                    // You can display a success message or redirect the user to a success page here
                    alert("Password updated successfully");
                } catch (err) {
                    console.log("Error:", err.response.data.error);
                    // Display an error message to the user or handle the error appropriately
                    alert("Password update failed");
                }
            }
        });
    </script>
</body>
</html>
